# E2Eテスト実装計画

## 1. 環境構築

### 1.1 依存関係の追加
- [x] Cargo.tomlに必要なクレートを追加
  - `tempfile`: テスト用の一時ディレクトリ作成
  - `assert_cmd`: コマンドライン実行のテスト
  - `predicates`: テスト結果の検証
  - `tokio-test`: 非同期テスト用

### 1.2 テストディレクトリの構造化
- [x] `tests/E2E/`ディレクトリの作成
- [x] `tests/E2E/helpers/`の作成
- [x] `tests/E2E/fixtures/`の作成

## 2. テスト実装

### 2.1 基本フロー
1. `cph atcoder work abc300`
   - [x] コマンド実行のテスト
   - [x] ディレクトリ構造の検証
   - [x] 設定ファイルの検証

2. `cph atcoder open a`
   - [x] コマンド実行のテスト
   - [x] ファイル生成の検証
   - [x] URLの検証

3. `cph atcoder submit a`
   - [x] コマンド実行のテスト
   - [x] テスト実行の検証
   - [x] 提出処理の検証

### 2.2 エラーケース
- [x] 無効なコンテストID
- [x] 存在しない問題
- [x] 提出失敗

## 3. モックの実装

### 3.1 外部サービス
- [x] AtCoderのログイン状態のモック
- [x] 問題ページアクセスのモック
- [x] 提出APIのモック

### 3.2 ローカル環境
- [x] Dockerコンテナの制御
- [x] ファイルシステムの操作
- [x] プロセス実行の制御

## 4. CI/CD対応

### 4.1 GitHub Actions
- [ ] テスト実行環境の構築
- [ ] 依存関係のキャッシュ設定
- [ ] テストの自動実行設定

### 4.2 テストの最適化
- [ ] 並列実行の設定
- [ ] タイムアウト設定
- [ ] リソース制限の設定 