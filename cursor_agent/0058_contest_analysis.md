# コンテストモジュール機能分析

## 概要
`src/contest`配下には、競技プログラミングコンテストの管理と実行に関する機能が実装されています。
現在は`commands.yaml`と`parse.rs`のみを使用する方針ですが、既存の機能を分析し、再実装の参考にします。

## 主要な機能

### 1. コマンド解析システム (`parse.rs`)
- コマンドとその別名（エイリアス）の管理
- コマンド引数の解析と正規化
- サイト名、言語、コンテストID、問題IDなどの解決
- テスト機能付きの堅牢な実装

### 2. コンテスト状態管理 (`core/state.rs`)
- アクティブなコンテストディレクトリの管理
- コンテスト情報の保持（コンテストID、問題ID、使用言語、サイト）
- 状態の永続化と復元機能

### 3. ファイルシステム操作 (`fs/`)
- トランザクション型のファイル操作
- バックアップと復元機能
- ディレクトリ作成、ファイルコピー、移動、削除などの基本操作
- エラーハンドリングとロールバック機能

### 4. テスト管理 (`core/test.rs`)
- テストケースの生成と実行
- ジェネレータとテスターの管理
- 言語別のテスト実行環境

### 5. パス管理 (`core/path.rs`)
- コンテストディレクトリ構造の管理
- 問題ファイル、テストファイルのパス解決
- 言語別のファイル拡張子とテンプレート管理

### 6. エラー処理 (`error.rs`)
- 詳細なエラー型定義
- コンテキスト付きのエラー情報
- デバッグ用のスタックトレース機能

## 再実装に向けた考察

### 活用すべき設計パターン
1. コマンド解析の柔軟性
   - エイリアスシステム
   - 引数の正規化処理
   - テストによる品質保証

2. エラー処理の体系
   - 詳細なエラー型
   - コンテキスト情報の付加
   - ユーザーフレンドリーなエラーメッセージ

3. ファイル操作の安全性
   - トランザクションベースの操作
   - バックアップ機能
   - ロールバック機能

### 改善点
1. 機能の分離
   - コアロジックとファイル操作の明確な分離
   - インターフェースの簡素化

2. 設定管理
   - より柔軟な設定システム
   - 環境変数との連携

3. テスト機能
   - より軽量なテスト実行システム
   - 言語非依存の設計 