# Clippy警告対応計画

## 調査概要
Clippy実行により158個のエラー/警告が検出されました。これらを分類し、対応優先度を設定します。

## 警告の分類と対応計画

### 1. 依存関係の重複バージョン（22件）
**問題**: `multiple_crate_versions` - 同じクレートの複数バージョンが存在
- base64: 0.21.7, 0.22.1
- getrandom: 0.2.16, 0.3.3
- hashbrown: 0.12.3, 0.14.5, 0.15.4
- その他多数

**対応計画**:
- 優先度: **低**
- `cargo tree -d` で依存関係を調査
- 可能な範囲でバージョンを統一
- 直接依存のみ対応し、間接依存は許容

### 2. コード品質改善（高優先度）

#### 2.1 unwrap()の使用（2件）
**ファイル**: `src/application/config_service.rs:285, 288`
- **対応**: テストコード内なので `#[cfg(test)]` でスコープを明確化
- **優先度**: **高**（パニックリスク）

#### 2.2 未使用のself引数（3件）
**ファイル**: 
- `src/application/config_service.rs:140`
- `src/infrastructure/drivers/test_runner.rs:21, 37`
- **対応**: 関連関数（associated function）に変更
- **優先度**: **中**

#### 2.3 不要なResult/Optionラップ（2件）
**ファイル**: 
- `src/application/config_service.rs:140` (Result)
- `src/application/config_service.rs:251` (Option)
- **対応**: 戻り値の型を簡素化
- **優先度**: **中**

### 3. コードスタイル改善（中優先度）

#### 3.1 format!マクロの最適化（多数）
- **対応**: `format!("text {}", var)` → `format!("text {var}")`
- **優先度**: **中**

#### 3.2 Default実装の追加（4件）
- ConfigContext
- LocalFileSystem
- SystemShell
- TracingLogger
- **対応**: `impl Default` を追加
- **優先度**: **中**

#### 3.3 use_self警告（多数）
- **対応**: `StructName::` → `Self::`
- **優先度**: **低**

### 4. その他の改善

#### 4.1 PartialEq実装時のEq追加（2件）
- **対応**: `#[derive(PartialEq, Eq)]`
- **優先度**: **低**

#### 4.2 const fn化可能な関数（4件）
- **対応**: `pub fn new()` → `pub const fn new()`
- **優先度**: **低**

## 実装順序
1. **第1フェーズ**: unwrap()の削除、エラーハンドリング改善
2. **第2フェーズ**: 未使用self、不要なResult/Option削除
3. **第3フェーズ**: Default実装、format!最適化
4. **第4フェーズ**: その他のスタイル改善

## 推定作業量
- 高優先度項目: 1-2時間
- 中優先度項目: 2-3時間
- 低優先度項目: 1-2時間
- 合計: 4-7時間

## 次のステップ
1. unwrap()使用箇所のエラーハンドリング改善から着手
2. 各モジュールごとに段階的に対応
3. CI/CD設定後は自動チェックを有効化