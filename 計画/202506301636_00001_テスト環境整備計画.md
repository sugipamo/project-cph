# テスト環境整備計画

## 現状分析

### テスト実行環境
- **現状**: テストフレームワークは設定済みだが、実際のテストコードは存在しない
- **テスト実行結果**: `cargo test --all-features` で0件のテストが実行される
- **依存関係**: 
  - mockall 0.12 (モックフレームワーク)
  - pretty_assertions 1.4 (アサーション改善)
  - test-case 3.3 (テストケース生成)
  - proptest 1.4 (プロパティベーステスト)
  - criterion 0.5 (ベンチマーク)

### ディレクトリ構造
- **単体テスト**: src/配下の各モジュールに`#[cfg(test)]`ブロックが存在しない
- **統合テスト**: tests/ディレクトリが存在しない
- **ベンチマーク**: benches/benchmarks.rsファイルは存在するが、実装されていない

## 対応方針

### 1. テストディレクトリの整備
- [ ] プロジェクトルートに`tests/`ディレクトリを作成
- [ ] 統合テスト用のファイル構造を設計

### 2. 単体テストの実装
- [ ] 各モジュールに`#[cfg(test)]`ブロックを追加
- [ ] ドメインロジックから優先的にテストを実装
- [ ] infrastructure層のテストはモックを活用

### 3. テストユーティリティの整備
- [ ] テスト用のフィクスチャやヘルパー関数を整備
- [ ] 共通のテストセットアップコードを作成

### 4. CI/CDへの統合
- [ ] GitHub Actionsでのテスト自動実行を設定
- [ ] プルリクエスト時のテスト必須化

## 優先順位
1. **高**: ドメインロジックの単体テスト作成
2. **中**: インフラストラクチャ層のテスト（モック使用）
3. **低**: 統合テストの実装

## 期待される効果
- コードの品質向上
- リファクタリング時の安全性確保
- バグの早期発見
- ドキュメントとしてのテストコード