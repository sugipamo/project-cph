# テストカバレッジ導入計画

## 現状分析

### カバレッジツールの状況
- **現状**: テストカバレッジツールが一切設定されていない
- **Cargo.toml**: カバレッジ関連の依存関係なし
- **Makefile**: カバレッジ測定用のターゲットなし
- **CI/CD**: カバレッジレポートの生成・収集なし

### 利用可能なツール
1. **cargo-tarpaulin**: 最も人気があり使いやすい
2. **grcov**: Mozillaが開発、ソースベースカバレッジ対応
3. **cargo-llvm-cov**: LLVMのカバレッジ機能を利用

## 対応方針

### 1. カバレッジツールの選定と導入
- [ ] cargo-tarpaulinを第一候補として評価
- [ ] プロジェクトの特性に合わせたツール選定
- [ ] 開発環境へのインストール手順の文書化

### 2. Makefileへの統合
- [ ] `make coverage`ターゲットの追加
- [ ] HTMLレポート生成オプションの設定
- [ ] カバレッジ閾値の設定（例：80%以上）

### 3. CI/CDパイプラインへの統合
- [ ] GitHub Actionsでのカバレッジ測定
- [ ] カバレッジレポートのアップロード（Codecov等）
- [ ] プルリクエストへのカバレッジ変化の表示

### 4. カバレッジ目標の設定
- [ ] 初期目標：60%（新規プロジェクトのため段階的に向上）
- [ ] 中期目標：80%
- [ ] ドメインロジック：90%以上
- [ ] インフラストラクチャ層：70%以上（モック活用）

## 実装手順
1. cargo-tarpaulinのインストールと動作確認
2. Makefileにカバレッジターゲット追加
3. ベースラインカバレッジの測定
4. GitHub Actions設定の追加
5. カバレッジバッジの追加

## 期待される効果
- テストの網羅性の可視化
- 未テストコードの特定
- 品質指標の定量化
- チーム全体での品質意識の向上

## 注意事項
- テストが存在しない現状では、カバレッジは0%からのスタート
- カバレッジ率だけでなく、テストの質も重要
- 100%カバレッジを目指すのではなく、意味のあるテストを書くことが重要