# アーキテクチャ簡素化計画

## 概要
現在の7層Clean Architectureから4層アーキテクチャへの簡素化を行い、開発効率と保守性を向上させる。

## 背景と課題
- 現状: 134ファイル、75ディレクトリの過度な細分化
- 7層Clean Architectureの実装による責務の曖昧さ
- レイヤー間の依存関係の複雑化
- 開発効率の低下とメンテナンス負荷の増大

## 目標
1. ファイル数を30%削減（134 → 94ファイル）
2. ディレクトリ階層を7層から4層へ統合
3. 各レイヤーの責務を明確化
4. 開発効率の向上

## 実装方針

### 新アーキテクチャ構成（4層）
```
src/
├── presentation/    # API、CLI、外部インターフェース
├── application/     # ユースケース、ワークフロー制御
├── domain/         # ビジネスロジック、エンティティ
└── infrastructure/ # 外部システム連携、副作用処理
```

### レイヤー統合マッピング
- Presentation層: 現在のPresentation + Interface層
- Application層: 現在のApplication + UseCase層の統合
- Domain層: 現在のDomain層を維持
- Infrastructure層: 現在のInfrastructure + Gateway + Repository層

## 実装フェーズ

### フェーズ1: 現状分析と影響評価（1週間）
- 各レイヤーの依存関係マップ作成
- 統合対象モジュールの特定
- 影響を受けるテストの洗い出し

### フェーズ2: 段階的統合（2-3週間）
1. 小規模モジュールから統合開始
2. Feature Flagによる段階的切り替え
3. 各統合後のテスト実行と確認

### フェーズ3: リファクタリング（1-2週間）
- 重複コードの削除
- インターフェースの簡素化
- ドキュメントの更新

## 成功指標
- ファイル数削減率: 30%以上
- ビルド時間短縮: 20%以上
- テスト実行時間短縮: 15%以上
- 循環依存の完全解消

## リスクと対策
- リスク: 大規模変更による不具合の混入
- 対策: Feature Flagによる段階的移行、包括的な自動テスト

## 関連計画
- 202507011551_00003_依存性注入パターン導入計画.md
- 202507011551_00010_エラーハンドリング戦略計画.md