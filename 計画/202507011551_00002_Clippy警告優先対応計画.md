# Clippy警告優先対応計画

## 現状分析

### 調査結果
現在のClippy警告は主に以下のカテゴリに分類される：

1. **重要度：高（コード品質に直接影響）**
   - `unwrap_used`: 本番コードでのunwrap使用（パニックリスク）
   - `unused_async`: 非同期関数の不要な使用
   - `unused_self`: 未使用のself引数

2. **重要度：中（保守性・可読性に影響）**
   - `unnecessary_wraps`: 不要なResult/Optionラップ
   - `redundant_clone`: 不要なクローン操作
   - 変数の直接フォーマット文字列使用

3. **重要度：低（スタイル・慣習）**
   - `Default`実装の追加推奨
   - `Eq`実装の追加推奨
   - `const fn`への変更推奨
   - 構造体名の重複

## 対応方針

### 即時対応必須（優先度：最高）
1. **unwrap()の除去**
   - 特にインフラストラクチャ層での使用を排除
   - 適切なエラーハンドリングへの置き換え
   - テストコード以外では使用禁止

2. **unused_asyncの修正**
   - Mockドライバーのasyncメソッドをsyncに変更
   - または実際の非同期処理を実装

### 短期対応（優先度：高）
1. **unused_selfの修正**
   - 不要なself引数を削除
   - または`&self`を必要とする実装に変更

2. **unnecessary_wrapsの解消**
   - 不要なResult<T>をTに変更
   - エラーケースが存在しない場合は単純化

### 中期対応（優先度：中）
1. **フォーマット文字列の改善**
   - `format!("{}", var)`を`format!("{var}")`に変更

2. **Default実装の追加**
   - 推奨される構造体にDefault traitを実装

3. **redundant_cloneの除去**
   - 不要なクローン操作を削除

## 実装優先順位
1. unwrap()の完全除去（本番コード）
2. unused_asyncの修正（テストコードのモック）
3. unused_selfの整理
4. その他の警告は段階的に対応

## 対応除外項目
- `multiple_crate_versions`: 依存関係の問題であり、直接的な対応は困難
- テストコード内のunwrap()は許容（ただし、expect()への置き換えを推奨）

## 参考情報
- 既存の計画ファイル「202507011308_00002_Clippy警告対応計画.md」と連携
- 副作用はinfrastructure配下に集中（CLAUDE.mdの方針に準拠）