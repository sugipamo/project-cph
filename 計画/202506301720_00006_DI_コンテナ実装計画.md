# DIコンテナ実装計画

## 背景と目的
old_srcのPythonコードでは、`infrastructure/di_container.py`を中心としたDIコンテナが実装されており、クリーンアーキテクチャの依存性逆転原則を実現している。現在のRustプロジェクトでは、`main.rs`にAppContainerの枠組みは存在するが、実際のDI機能は未実装である。

## 取り込むべき価値
1. **依存性の一元管理**: すべてのインフラストラクチャコンポーネントをDIコンテナで管理
2. **テスタビリティの向上**: モック化による単体テストの容易化
3. **設定の柔軟性**: 実行時の依存性差し替えが可能

## 実装方針
1. `src/infrastructure/di_container.rs`の新規作成
2. DIキーの定義（enum型で型安全性を確保）
3. プロバイダーパターンの実装
4. `main.rs`からの依存性注入の実装

## 技術的考慮事項
- Rustの所有権システムを考慮し、`Arc<dyn Trait>`パターンを使用
- `once_cell`または`lazy_static`クレートを使用したシングルトン実装
- ビルダーパターンによる段階的な依存性構築

## 期待される効果
- インフラストラクチャ層と上位層の疎結合化
- テスト時のモック注入が容易に
- 将来的な機能拡張時の柔軟性確保