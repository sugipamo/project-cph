# Clippy設定改善計画

## 現状分析

### Clippy実行時のエラー
1. **設定ファイルエラー**:
   - `cyclomatic-complexity-threshold`フィールドの重複（`cognitive_complexity_threshold`として提供）
   - `warn-on-todo`は未知のフィールド
   - `cyclomatic-complexity-threshold`は非推奨フィールド

2. **コードの警告**:
   - `src/infrastructure/drivers/shell.rs:26` で`similar_names`警告
   - 変数名`cmd`と`cwd`が類似していると判定

### 現在のclippy.toml設定
- 認知的複雑度の閾値が重複して設定されている
- 存在しないフィールド`warn-on-todo`が設定されている

## 対応方針

### 1. clippy.toml設定ファイルの修正
- [ ] `cyclomatic-complexity-threshold`を削除し、`cognitive-complexity-threshold`に統一
- [ ] `warn-on-todo`フィールドを削除（このフィールドは存在しない）
- [ ] 設定ファイルの妥当性を検証

### 2. コードの警告対応
- [ ] `similar_names`警告への対応方針決定:
  - オプション1: 変数名を変更して警告を解消
  - オプション2: 該当箇所に`#[allow(clippy::similar_names)]`を追加
  - オプション3: プロジェクト全体で`similar_names`リントを無効化

### 3. Clippyルールの見直し
- [ ] プロジェクトに適したClippyルールセットの選定
- [ ] 必要に応じてカスタムルールの追加
- [ ] CI/CDでのClippy実行の設定

## 実装手順
1. clippy.tomlの修正
2. コード内の警告対応
3. Makefileの`lint`ターゲットが正常に動作することを確認
4. GitHub ActionsにClippyチェックを追加

## 期待される効果
- コード品質の向上
- 潜在的なバグの早期発見
- コードスタイルの統一
- CI/CDでの自動品質チェック