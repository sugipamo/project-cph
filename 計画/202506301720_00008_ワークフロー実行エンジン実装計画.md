# ワークフロー実行エンジン実装計画

## 背景と目的
old_srcでは`workflow/`ディレクトリと`services/workflow_execution/`を中心に、JSONベースのステップ定義から最適化されたワークフローを生成・実行するシステムが実装されている。これは競技プログラミングヘルパーの中核機能である。

## 取り込むべき価値
1. **宣言的ワークフロー定義**: JSONによるステップの宣言的記述
2. **依存関係解決**: ステップ間の依存関係の自動解決と並列実行
3. **最適化機能**: mkdir統合、冗長コピー除去などの自動最適化
4. **エラーハンドリング**: allow_failure設定による柔軟なエラー制御

## 実装方針
1. `src/domain/workflow/`でのワークフローエンティティ定義
2. `src/application/workflow/`でのビジネスロジック実装
3. `src/infrastructure/executors/`での実行環境の実装
4. Dockerサポートの段階的追加

## 技術的考慮事項
- `tokio`による非同期並列実行
- `petgraph`クレートによる依存グラフの構築と解析
- `futures`クレートによる並列タスクの管理
- トランザクショナルな実行状態管理

## 期待される効果
- 複雑なビルド・テスト手順の自動化
- 実行時間の最適化による開発効率向上
- エラー時の詳細な診断情報の提供