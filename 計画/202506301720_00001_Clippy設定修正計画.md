# Clippy設定修正計画

## 調査結果

### 現状の問題点

1. **clippy.toml の設定エラー**
   - `cyclomatic-complexity-threshold` フィールドが非推奨となり、`cognitive-complexity-threshold` への移行が必要
   - `warn-on-todo` は無効なフィールドとして認識されている
   - 上記のエラーにより、Clippyの実行が失敗している

2. **コード上の警告**
   - `src/infrastructure/drivers/shell.rs:26` で `similar_names` の警告が発生
   - 変数名 `cmd` と `cwd` が類似していると判定されている

### 影響範囲

- CI/CDパイプラインでClippyチェックが失敗する可能性
- コード品質チェックが機能していない状態
- 開発者がローカルでClippyを実行できない

## 対応計画

### 1. clippy.toml の修正
- **優先度**: 高
- **対応内容**:
  - `cyclomatic-complexity-threshold` を `cognitive-complexity-threshold` に変更
  - `warn-on-todo` フィールドを削除（または有効なフィールドに置き換え）
- **期待される効果**: Clippyの設定エラーが解消され、正常に実行可能になる

### 2. コード警告の対応
- **優先度**: 中
- **対応内容**:
  - `src/infrastructure/drivers/shell.rs` の変数名を見直し
  - `cmd` または `cwd` をより明確な名前に変更
- **期待される効果**: Clippyの警告が解消され、コードの可読性が向上

### 3. Clippy設定の最適化
- **優先度**: 低
- **対応内容**:
  - プロジェクトに適したClippy設定の見直し
  - 必要に応じて追加のlintルールの設定
- **期待される効果**: プロジェクトに最適化されたコード品質チェック

## 実装スケジュール

1. **第1フェーズ**: clippy.toml の修正（即時対応）
2. **第2フェーズ**: コード警告の解消（第1フェーズ完了後）
3. **第3フェーズ**: Clippy設定の最適化（第2フェーズ完了後、必要に応じて）

## リスクと対策

- **リスク**: 設定変更により新たな警告が表示される可能性
- **対策**: 段階的な修正と十分なテストの実施

## 参考情報

- [Rust Clippy Documentation](https://rust-lang.github.io/rust-clippy/)
- 現在のエラーメッセージから、Clippyの設定ファイルフォーマットが更新されていることが確認できる