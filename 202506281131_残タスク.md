# 残タスク - 2025/06/28 11:31

## テスト修正状況

### 完了したタスク
1. ✅ pytest実行による失敗テストの特定
2. ✅ 古い実装に基づくテストの修正・削除
   - FileRequest のインポートパスを修正
   - FormatInfo のパラメータを修正
   - LogLevel の比較ロジックを修正
   - EnvironmentManager のパラメータ名を修正
   - WorkflowLoggerAdapter のファクトリ関数を修正
   - UnifiedLogger のファクトリ関数を修正
   - persistence_driver のインポートパスを修正
   - Step クラスの parameters 引数を削除

### 現在のテスト状況
- **成功**: 554 tests
- **失敗**: 39 tests
- **スキップ**: 12 tests

### 残っている主な失敗テスト
1. tests/configuration/test_di_config.py (4件)
2. tests/configuration/test_di_config_simple.py (3件)
3. tests/domain/test_workflow.py (1件)
4. tests/infrastructure/drivers/test_docker_driver.py (1件)
5. tests/operations/requests/test_execution_requests.py (1件)
6. その他 29件

## テストカバレッジが低いモジュール

以下のモジュールはテストカバレッジが0%で、テストの追加が必要：

### 優先度高（コア機能）
1. `src/application/execution_history.py` - 実行履歴管理
2. `src/application/timing_calculator.py` - タイミング計算
3. `src/infrastructure/ast_analyzer.py` - AST解析
4. `src/data/sqlite_state/sqlite_state_repository.py` - SQLiteステート管理

### 優先度中（設定・データ処理）
1. `src/configuration/build_infrastructure.py` - ビルドインフラ設定
2. `src/configuration/execution_config.py` - 実行設定
3. `src/data/data_processors.py` - データプロセッサー
4. `src/data/state/state_repository.py` - ステートリポジトリ

### 優先度低（ユーティリティ・表示）
1. `src/presentation/cli_app.py` - CLIアプリケーション（UIテストは通常優先度低）
2. `src/presentation/context_formatter.py` - コンテキストフォーマッター
3. `src/infrastructure/module_info.py` - モジュール情報
4. `src/operations/path_types.py` - パス型定義

## 推奨アクション

1. **残りの失敗テストの修正**（優先度：高）
   - 各失敗テストを個別に確認し、新しい実装に合わせて修正
   - 特にDI設定関連のテストは重要

2. **テストカバレッジの改善**（優先度：中）
   - 0%カバレッジのモジュールに対してユニットテストを追加
   - 特にコア機能のモジュールを優先

3. **統合テストの確認**（優先度：低）
   - E2Eテストが正常に動作することを確認
   - 実際の使用シナリオでの動作確認

## 注記
- 一部のテストは古い実装に依存しているため、削除または大幅な修正が必要
- カバレッジ0%のモジュールは、使用されていない可能性もあるため、必要性を確認すること