# 実行制限設定

## タイムアウト管理

### デフォルト制限値
- **実行時間**: 6秒（競技プログラミングの標準的な上限）
- **コンパイル時間**: 30秒
- **コマンド全体**: 60秒

### 設定ファイルによる調整
```json
{
  "limits": {
    "execution_timeout": 6,
    "compilation_timeout": 30,
    "command_timeout": 60,
    "memory_limit_mb": 1024
  }
}
```

### 問題別の制限設定
```json
{
  "problem_limits": {
    "default": {
      "time": 6,
      "memory": 1024
    },
    "special_problems": {
      "large_input": {
        "time": 10,
        "memory": 2048
      }
    }
  }
}
```

## メモリ管理

### 基本方針
- デフォルト: 1024MB（競技プログラミングの一般的な制限）
- 監視はするが、主要な制限要因としては扱わない
- 設定ファイルで問題ごとに調整可能

### メモリ監視の実装
- プロセスレベルでの使用量追跡
- 制限超過時の適切な終了処理
- メモリリークの検出と警告

## 無限ループ対策

### 検出方法
1. **実行時間監視**
   - 設定時間を超えたら強制終了
   - SIGTERMの送信、その後SIGKILL

2. **リソース監視**
   - CPU使用率100%の継続を検出
   - メモリ使用量の急激な増加を検出

3. **プロセス管理**
   ```rust
   # 実装イメージ
   with timeout(limit=6):
       result = execute_solution()
   ```

### ユーザーへの通知
```
[TIMEOUT] 実行時間制限(6秒)を超えました
プログラムが無限ループしている可能性があります

デバッグのヒント:
1. ループの終了条件を確認してください
2. 再帰の基底条件を確認してください
3. 'cph debug --step' で段階実行できます
```

## パフォーマンス計測

### 自動計測項目
- 実行時間（ミリ秒単位）
- メモリ使用量（MB単位）
- 標準出力のサイズ

### 計測結果の表示
```
テストケース1: AC (120ms, 45MB)
テストケース2: AC (89ms, 44MB)
テストケース3: TLE (6000ms)
```