# 2025年6月29日 実行計画

## 目標
プロジェクト再生宣言に基づき、テストカバレッジの向上とコード品質の改善を1日で実現可能な範囲で実施する。

## 現状分析
- テストカバレッジ: 65% (2931 statements uncovered)
- 0%カバレッジのモジュールが複数存在
- Protocol型の実行時チェック問題が未解決
- pytest収集警告の修正が必要

## 本日の実行計画

### 1. テストカバレッジ向上 (優先度: 高)
**目標**: 最も影響度の高い0%カバレッジモジュールのテストを追加し、全体カバレッジを70%以上に向上

#### 対象モジュール (優先順位順):
1. `src/domain/models/workflow_result.py` (0% → 80%以上)
2. `src/domain/models/execution_result.py` (0% → 80%以上)
3. `src/domain/models/contest_problem.py` (0% → 80%以上)
4. `src/infrastructure/drivers/file_driver.py` (0% → 70%以上)
5. `src/application/managers/config_manager.py` (低カバレッジ → 70%以上)

### 2. コード品質改善 (優先度: 中)
**目標**: Protocol型の実行時チェック問題を解決し、pytest警告を修正

#### 実施内容:
1. Protocol継承クラスの`isinstance`チェックを適切な方法に置き換え
2. pytest収集警告の原因となるテストファイル構造の修正
3. src_check/による自動修正の実行と結果確認

### 3. アーキテクチャ検証 (優先度: 低)
**目標**: 依存関係の妥当性を確認し、循環参照や不適切な依存を検出・修正

#### 実施内容:
1. src_check/dependency_analyzerによる全体分析
2. 検出された問題の優先度付けと修正
3. CLAUDE.mdの品質基準への準拠確認

## 成功基準
- [ ] テストカバレッジが70%以上に向上
- [ ] 最低3つの0%カバレッジモジュールが50%以上のカバレッジを達成
- [ ] Protocol型の実行時チェック問題が解決
- [ ] pytest実行時の警告が50%以上減少
- [ ] 全テストが正常に通過（既存のskipを除く）

## タイムライン
- 09:00-12:00: テストカバレッジ向上（モジュール1-3）
- 13:00-15:00: テストカバレッジ向上（モジュール4-5）
- 15:00-17:00: コード品質改善
- 17:00-18:00: アーキテクチャ検証と最終確認

## リスクと対策
- **リスク**: テスト追加により既存テストが破綻する可能性
  - **対策**: 各モジュールのテスト追加後に全体テストを実行
- **リスク**: Protocol型修正が広範囲に影響する可能性
  - **対策**: 影響範囲を事前に調査し、段階的に修正

## 備考
- CLAUDE.mdの品質基準を厳守（デフォルト値禁止、副作用の分離等）
- 長期的な保守性を考慮した実装を心がける
- 必要に応じて残タスクを`履歴/202506290019_残タスク.md`に記録