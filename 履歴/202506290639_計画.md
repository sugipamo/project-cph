# 2025年6月29日 作業計画

## プロジェクト概要
CPH (Competitive Programming Helper) - 競技プログラミング統合ワークフロー自動化ツール

## 本日の作業目標
1日でできる範囲で、中優先度タスクである「副作用の移動（36箇所）」を完了させる。

## 作業計画

### 1. src_checkツールの修正と実行（所要時間：1時間）
- **目的**: 副作用チェッカーを正常に動作させ、違反箇所を特定
- **作業内容**:
  1. src_check内のインポートパスを修正
  2. side_effect_checker.pyを実行して36箇所の違反を特定
  3. 違反箇所のリストを作成

### 2. 副作用の分析と分類（所要時間：1時間）
- **目的**: 各違反箇所の副作用の種類と移動方法を明確化
- **作業内容**:
  1. 各違反箇所の副作用の種類を分類（ファイルI/O、外部API呼び出し、DB操作等）
  2. 移動先のinfrastructure層の適切な場所を決定
  3. 依存性注入のパターンを設計

### 3. infrastructure層への移動実装（所要時間：4時間）
- **目的**: CLAUDE.mdの規約に従い、副作用をinfrastructure層に集約
- **作業内容**:
  1. 新しいインターフェースの定義（必要な場合）
  2. infrastructure層での実装
  3. 元の場所からの副作用の除去
  4. main.pyでの依存性注入の設定

### 4. テストの実行と修正（所要時間：1.5時間）
- **目的**: 変更後もすべてのテストが通過することを確認
- **作業内容**:
  1. 全テストの実行
  2. 失敗したテストの修正
  3. テストカバレッジの確認（88%以上を維持）

### 5. 品質チェックと文書化（所要時間：0.5時間）
- **目的**: 変更の品質確保と結果の記録
- **作業内容**:
  1. src_check配下のチェッカーを実行
  2. 新たな違反がないことを確認
  3. 作業結果をまとめて記録

## 期待される成果
- 36箇所の副作用がすべてinfrastructure層に移動完了
- CLAUDE.mdの規約に完全準拠
- テストカバレッジ88%以上を維持
- 全テスト（1814個）が通過

## リスクと対策
- **リスク**: 副作用の移動により既存の動作が変わる可能性
- **対策**: 各変更後に関連テストを実行し、動作を確認

## 備考
- 中長期的な視点で実装を行い、短期的な解決を避ける
- デフォルト値の使用とフォールバック処理は禁止
- 設定取得はsrc/configuration/readme.mdに従う