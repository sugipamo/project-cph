{
  "python": {
    "aliases": ["py"],
    "language_id": "5078",
    "source_file_name": "main.py",
    "contest_current_path": "./contest_current",
    "contest_stock_path": "./contest_stock",
    "contest_template_path": "./contest_template",
    "contest_temp_path": "./.temp",
    "workspace_path": "./workspace",
    "commands": {
      "open": {
        "aliases": ["o"],
        "description": "コンテストを開く",
        "steps": [
          {
            "type": "python",
            "allow_failure": true, 
            "show_output": false, 
            "cmd": [
              "import webbrowser",
              "webbrowser.open('https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_id}')"
            ]
          },
          {
            "type": "copy",
            "allow_failure": true,
            "show_output": false,
            "force_env_type": "local",
            "cmd": ["{contest_current_path}/{source_file_name}", "{contest_stock_path}/{contest_name}/{problem_id}/{source_file_name}"]
          },
          {
            "type": "copy",
            "allow_failure": true,
            "show_output": false,
            "force_env_type": "local",
            "cmd": ["{contest_template_path}/{language_name}/{source_file_name}", "{contest_current_path}/{source_file_name}"]
          },
          {
            "type": "shell", 
            "allow_failure": true,
            "show_output": false,
            "force_env_type": "local",
            "cmd": ["cursor", "{contest_current_path}/{source_file_name}"]
          },
          {
            "type": "oj", 
            "allow_failure": true, 
            "show_output": true, 
            "cwd": "{workspace_path}",
            "cmd": ["oj", "download", "https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_id}"]
          },
          {
            "type": "movetree",
            "allow_failure": true,
            "show_output": false,
            "force_env_type": "local",
            "cmd": ["{workspace_path}/test", "{contest_current_path}/test"]
          }
        ]
      },
      "test": {
        "aliases": ["t"],
        "description": "テストを実行する",
        "steps": [
          {
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "type": "test",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["python3", "{workspace_path}/{source_file_name}"]
          }
        ]
      },
      "submit": {
        "aliases": ["s"],
        "description": "提出する",
        "steps": [
          {
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "type": "oj",
            "allow_failure": false,
            "show_output": true,
            "cmd": ["oj", "submit", "--wait=0", "--yes", "--language", "{language_id}", "https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_id}", "{contest_current_path}/{source_file_name}"]
          }
        ]
      }
    },
    "env_types": {
      "docker": {
        "aliases": ["docker"],
        "dockerfile_path": "./contest_env/python/Dockerfile",
        "mount_path": "/workspace",
        "working_directory": "/workspace",
        "keep_alive_command": "tail -f /dev/null",
        "default_shell": "bash",
        "container_settings": {
          "memory_limit": "1GB",
          "cpu_limit": "1.0",
          "timeout_seconds": 300
        },
        "error_patterns": {
          "daemon_connection": [
            "cannot connect to the docker daemon",
            "docker daemon is not running",
            "connection refused",
            "docker.sock"
          ],
          "image_not_found": [
            "no such image",
            "pull access denied", 
            "repository does not exist",
            "image not found",
            "manifest unknown"
          ],
          "container_conflict": [
            "container already exists",
            "container is running",
            "container not found",
            "conflict",
            "name is already in use"
          ],
          "network_error": [
            "network", "timeout", "connection", "dns", "tls"
          ],
          "filesystem_error": [
            "permission denied",
            "no such file or directory",
            "directory not empty",
            "disk space"
          ],
          "resource_error": [
            "out of memory", "resource", "quota", "limit", "no space left"
          ]
        },
        "retry_settings": {
          "max_attempts": 3,
          "base_delay_seconds": 1.0,
          "max_delay_seconds": 30.0,
          "exponential_backoff": true
        },
        "state_management": {
          "state_directory": "~/.cph/state",
          "state_file_format": "json",
          "auto_backup": true,
          "max_history": 100
        },
        "naming_conventions": {
          "container_prefix": "cph",
          "oj_container_prefix": "cph_ojtools",
          "separator": "_",
          "image_tag_format": "{language}:latest"
        },
        "path_settings": {
          "container_root_path": "/",
          "host_current_directory": ".",
          "path_separator": "/",
          "temp_directory": "/tmp",
          "workspace_alias": "./workspace"
        },
        "docker_settings": {
          "dockerfile_hash_length": 12,
          "custom_image_prefixes": ["ojtools", "cph_"],
          "known_registries": [
            "docker.io",
            "gcr.io", 
            "registry.hub.docker.com",
            "quay.io",
            "ghcr.io"
          ],
          "command_wrapper": "bash -c",
          "invalid_path_chars": ["..", " ", "\\t", "\\n", "\\r"]
        },
        "timeout_settings": {
          "process_termination_timeout": 3
        },
        "preparation_actions": {
          "remove_stopped_container": "remove_stopped_container",
          "run_new_container": "run_new_container",
          "create_directory": "create_directory",
          "build_or_pull_image": "build_or_pull_image"
        },
        "docker_options": {
          "force_remove_flag": "f"
        },
        "system_limits": {
          "min_disk_space_mb": 100,
          "script_extensions": [".py", ".js", ".sh", ".rb", ".go"],
          "dangerous_chars": ["|", ";", "&", "$", "`", "\\n", "\\r", "\\0"]
        }
      },
      "local": {
        "aliases": ["local"],
        "working_directory": ".",
        "default_shell": "bash",
        "timeout_seconds": 300,
        "retry_settings": {
          "max_attempts": 3,
          "base_delay_seconds": 1.0,
          "max_delay_seconds": 30.0
        }
      }
    }
  }
}