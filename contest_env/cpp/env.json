{
  "cpp": {
    "aliases": ["c++", "cxx"],
    "language_id": "5017",
    "source_file_name": "main.cpp",
    "debug": {
      "format": {
        "icons": {
          "compile": "⚙️"
        }
      }
    },
    "commands": {
      "open": {
        "aliases": ["o"],
        "description": "コンテストを開く",
        "steps": [
          {
            "type": "python",
            "allow_failure": true, 
            "show_output": false, 
            "cmd": [
              "import webbrowser",
              "webbrowser.open('https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_id}')"
            ]
          },
          {
            "type": "copy",
            "allow_failure": true,
            "show_output": false,
            "force_env_type": "local",
            "cmd": ["{contest_current_path}/{source_file_name}", "{contest_stock_path}/{contest_name}/{problem_id}/{source_file_name}"]
          },
          {
            "type": "copy",
            "allow_failure": true,
            "show_output": false,
            "force_env_type": "local",
            "cmd": ["{contest_template_path}/{language_name}/{source_file_name}", "{contest_current_path}/{source_file_name}"]
          },
          {
            "type": "shell", 
            "allow_failure": true,
            "show_output": false,
            "force_env_type": "local",
            "cmd": ["cursor", "{contest_current_path}/{source_file_name}"]
          },
          {
            "type": "oj", 
            "allow_failure": true, 
            "show_output": true, 
            "cwd": "{workspace_path}",
            "cmd": ["oj", "download", "https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_id}"]
          },
          {
            "type": "movetree",
            "allow_failure": true,
            "show_output": false,
            "force_env_type": "local",
            "cmd": ["{workspace_path}/test", "{contest_current_path}/test"]
          }
        ]
      },
      "test": {
        "aliases": ["t"],
        "description": "テストを実行する",
        "steps": [
          {
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "type": "test",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["python3", "{workspace_path}/{source_file_name}"]
          }
        ]
      },
      "submit": {
        "aliases": ["s"],
        "description": "提出する",
        "steps": [
          {
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "type": "oj",
            "allow_failure": false,
            "show_output": true,
            "cmd": ["oj", "submit", "--wait=0", "--yes", "--language", "{language_id}", "https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_id}", "{contest_current_path}/{source_file_name}"]
          }
        ]
      },
      "debug": {
        "aliases": ["d"],
        "description": "デバッグビルドとGDB実行",
        "steps": [
          {
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "type": "compile",
            "allow_failure": false,
            "show_output": true,
            "cmd": ["g++", "-std=c++17", "-Wall", "-g", "-DDEBUG", "-o", "{workspace_path}/main_debug", "{workspace_path}/{source_file_name}"]
          },
          {
            "type": "shell",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["gdb", "{workspace_path}/main_debug"]
          }
        ]
      }
    },
    "env_types": {
      "docker": {
        "aliases": ["docker"],
        "dockerfile_path": "./contest_env/cpp/Dockerfile",
        "compiler_settings": {
          "standard": "c++17",
          "optimization": "-O2",
          "warning_flags": ["-Wall", "-Wextra"],
          "debug_flags": ["-g", "-DDEBUG"],
          "sanitizer_flags": ["-fsanitize=address", "-fsanitize=undefined"]
        },
        "container_settings": {
          "memory_limit": "2GB",
          "cpu_limit": "2.0",
          "timeout_seconds": 300
        },
        "error_patterns": {
          "build_error": [
            "dockerfile",
            "build failed",
            "build context",
            "step failed"
          ],
          "compile_error": [
            "compilation terminated",
            "fatal error",
            "undefined reference",
            "no such file"
          ]
        },
        "system_limits": {
          "min_disk_space_mb": 100,
          "script_extensions": [".cpp", ".cc", ".cxx", ".c", ".h", ".hpp"],
          "dangerous_chars": ["|", ";", "&", "$", "`", "\\n", "\\r", "\\0"]
        },
        "run_prepare_file_moves": [
          {
            "src": "{contest_current_path}/{source_file_name}",
            "dst": "{workspace_path}/{source_file_name}"
          }
        ],
        "build_cmds": [
          ["g++", "-std={compiler_settings.standard}", "{compiler_settings.optimization}", "-o", "{workspace_path}/main", "{workspace_path}/{source_file_name}"]
        ],
        "run_cmd": ["{workspace_path}/main"]
      },
      "local": {
        "aliases": ["local"],
        "compiler_settings": {
          "standard": "c++17",
          "optimization": "-O2",
          "warning_flags": ["-Wall", "-Wextra"],
          "debug_flags": ["-g", "-DDEBUG"],
          "sanitizer_flags": ["-fsanitize=address", "-fsanitize=undefined"]
        },
        "run_prepare_file_moves": [
          {
            "src": "{contest_current_path}/{source_file_name}",
            "dst": "{workspace_path}/{source_file_name}"
          }
        ],
        "build_cmds": [
          ["g++", "-std={compiler_settings.standard}", "{compiler_settings.optimization}", "-o", "{workspace_path}/main", "{workspace_path}/{source_file_name}"]
        ],
        "run_cmd": ["{workspace_path}/main"]
      },
      "competitive": {
        "aliases": ["comp", "fast"],
        "description": "競技プログラミング最適化設定",
        "compiler_settings": {
          "standard": "c++20",
          "optimization": "-O3",
          "warning_flags": [],
          "additional_flags": ["-march=native", "-mtune=native", "-funroll-loops"]
        },
        "run_prepare_file_moves": [
          {
            "src": "{contest_current_path}/{source_file_name}",
            "dst": "{workspace_path}/{source_file_name}"
          }
        ],
        "build_cmds": [
          ["g++", "-std={compiler_settings.standard}", "{compiler_settings.optimization}", "{compiler_settings.additional_flags}", "-o", "{workspace_path}/main", "{workspace_path}/{source_file_name}"]
        ],
        "run_cmd": ["{workspace_path}/main"]
      }
    }
  }
}