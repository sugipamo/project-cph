{
  "rust": {
    "aliases": ["rs"],
    "language_id": "5054",
    "source_file_name": "src/main.rs",
    "file_patterns": {
      "test_files": [
        "test/*.in",
        "test/*.out"
      ],
      "contest_files": [
        "src/main.rs",
        "src/*.rs",
        "Cargo.toml"
      ],
      "build_files": [
        "target/**/*",
        "Cargo.lock"
      ]
    },

    "commands": {
      "open": {
        "aliases": ["o"],
        "description": "問題を開く（切り替え・復元も自動処理）",
        "steps": [
          {
            "type": "python",
            "allow_failure": true,
            "show_output": false,
            "cmd": [
              "import webbrowser",
              "webbrowser.open('https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_name}')"
            ]
          },
          {
            "type": "shell",
            "allow_failure": true,
            "show_output": false,
            "cmd": ["cursor", "{contest_current_path}/{source_file_name}"]
          },
          {
            "type": "shell",
            "allow_failure": true,
            "show_output": true,
            "cwd": "{workspace_path}",
            "cmd": ["oj", "download", "https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_name}"] 
          },
          {
            "type": "movetree",
            "allow_failure": true,
            "show_output": true,
            "cmd": [
              "{workspace_path}/{test_files}",
              "{contest_current_path}/{test_files}"
            ]
          }
        ]
      },
      "test": {
        "aliases": ["t"],
        "description": "テストを実行する",
        "steps": [
          {
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/Cargo.toml", "{workspace_path}/Cargo.toml"]
          },
          {
            "type": "shell",
            "allow_failure": false,
            "show_output": true,
            "cwd": "{workspace_path}",
            "cmd": ["cargo", "build", "--release"]
          },
          {
            "type": "test",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["{workspace_path}/target/release/main"],
            "output_format": "preset",
            "format_preset": "standard"
          }
        ]
      },
      "submit": {
        "aliases": ["s"],
        "description": "提出する",
        "steps": [
          {
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "type": "oj",
            "allow_failure": false,
            "show_output": true,
            "cmd": ["oj", "submit", "--wait=0", "--yes", "--language", "{language_id}", "https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_name}", "{contest_current_path}/{source_file_name}"]
          }
        ]
      }
    },
    "env_types": {
      "local": {
        "aliases": ["local"]
      },
      "docker": {
        "aliases": ["docker"]
      }
    }
  }
}