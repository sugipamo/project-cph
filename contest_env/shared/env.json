{
  "shared": {
    "paths": {
      "contest_current_path": "./contest_current",
      "contest_stock_path": "./contest_stock/{language_name}/{contest_name}/{problem_name}",
      "contest_template_path": "./contest_template",
      "contest_temp_path": "./.temp",
      "workspace_path": "./workspace"
    },
    "commands": {
      "open": {
        "aliases": ["o"],
        "description": "問題を開く（切り替え・復元も自動処理）",
        "steps": [
          {
            "name": "contest_stockから復元",
            "type": "copytree",
            "when": "test -d {contest_stock_path}/{language_name}/{contest_name}/{problem_name}/{contest_files}",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["{contest_stock_path}/{language_name}/{contest_name}/{problem_name}/{contest_files}", "{contest_current_path}/{contest_files}"]
          },
          {
            "name": "テンプレートから初期化",
            "type": "copytree",
            "when": "test ! -d {contest_stock_path}/{language_name}/{contest_name}/{problem_name}/{contest_files}",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["{contest_template_path}/{language_name}/{contest_files}", "{contest_current_path}/{contest_files}"]
          },
          {
            "name": "ブラウザで問題を開く",
            "type": "python",
            "allow_failure": true,
            "show_output": false,
            "cmd": [
              "import webbrowser",
              "webbrowser.open('https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_name}')"
            ]
          },
          {
            "name": "エディタでファイルを開く",
            "type": "shell",
            "allow_failure": true,
            "show_output": false,
            "cmd": ["cursor", "{contest_current_path}/{source_file_name}"]
          },
          {
            "name": "テストケースをダウンロード",
            "type": "shell",
            "allow_failure": true,
            "show_output": true,
            "cwd": "{workspace_path}",
            "cmd": ["oj", "download", "https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_name}"] 
          },
          {
            "name": "テストケースを移動",
            "type": "movetree",
            "allow_failure": true,
            "show_output": true,
            "cmd": [
              "{workspace_path}/{test_files}",
              "{contest_current_path}/{test_files}"
            ]
          }
        ]
      },
      "test": {
        "aliases": ["t"],
        "description": "テストを実行する",
        "steps": [
          {
            "name": "ソースファイルをワークスペースにコピー",
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "name": "テスト実行",
            "type": "test",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["{run_command}", "{workspace_path}/{source_file_name}"],
            "output_format": "preset",
            "format_preset": "standard"
          }
        ]
      },
      "submit": {
        "aliases": ["s"],
        "description": "提出する",
        "steps": [
          {
            "name": "ソースファイルをワークスペースにコピー",
            "type": "copy",
            "allow_failure": false,
            "show_output": false,
            "cmd": ["{contest_current_path}/{source_file_name}", "{workspace_path}/{source_file_name}"]
          },
          {
            "name": "online-judgeで提出",
            "type": "oj",
            "allow_failure": false,
            "show_output": true,
            "cmd": ["oj", "submit", "--wait=0", "--yes", "--language", "{language_id}", "https://atcoder.jp/contests/{contest_name}/tasks/{contest_name}_{problem_name}", "{contest_current_path}/{source_file_name}"]
          }
        ]
      },
      "backup": {
        "aliases": ["b"],
        "description": "現在の作業をcontest_stockにバックアップ",
        "steps": [
          {
            "name": "バックアップ先ディレクトリを作成",
            "type": "mkdir",
            "allow_failure": true,
            "show_output": false,
            "cmd": ["{contest_stock_path}"]
          },
          {
            "name": "既存のバックアップを削除",
            "type": "rmtree",
            "when": "test -d {contest_stock_path}",
            "allow_failure": true,
            "show_output": false,
            "cmd": ["{contest_stock_path}"]
          },
          {
            "name": "contest_currentをバックアップ",
            "type": "copytree",
            "when": "test -d {contest_current_path}",
            "allow_failure": false,
            "show_output": true,
            "cmd": ["{contest_current_path}", "{contest_stock_path}"]
          }
        ]
      },
      "switch": {
        "aliases": ["sw"],
        "description": "問題を切り替え（自動バックアップ・復元）",
        "steps": [
          {
            "name": "現在の作業をバックアップ",
            "type": "copytree",
            "when": "test -d {contest_current_path}",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["{contest_current_path}", "{contest_stock_path}"]
          },
          {
            "name": "contest_currentを削除",
            "type": "rmtree",
            "when": "test -d {contest_current_path}",
            "allow_failure": true,
            "show_output": false,
            "cmd": ["{contest_current_path}"]
          },
          {
            "name": "新しい問題のストックから復元",
            "type": "copytree",
            "when": "test -d {contest_stock_path}",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["{contest_stock_path}", "{contest_current_path}"]
          },
          {
            "name": "テンプレートから初期化",
            "type": "copytree",
            "when": "test ! -d {contest_stock_path}",
            "allow_failure": true,
            "show_output": true,
            "cmd": ["{contest_template_path}/{language_name}", "{contest_current_path}"]
          }
        ]
      }
    },
    "env_types": {
      "local": {
        "aliases": ["local"]
      },
      "docker": {
        "aliases": ["docker"]
      }
    },

    "environment_logging": {
      "enabled": true,
      "show_language_name": true,
      "show_contest_name": true,
      "show_problem_name": true,
      "show_env_type": true
    },
    "output": {
      "show_workflow_summary": true,
      "show_step_details": false,
      "show_execution_completion": true,
      "step_details": {
        "show_type": true,
        "show_command": true,
        "show_path": true,
        "show_execution_time": true,
        "show_stdout": true,
        "show_stderr": true,
        "show_return_code": true,
        "max_command_length": 80
      }
    },
    "output_presets": {
      "quiet": {
        "description": "最小限の出力",
        "show_workflow_summary": false,
        "show_step_details": false,
        "show_execution_completion": false
      },
      "summary_only": {
        "description": "サマリーのみ表示",
        "show_workflow_summary": true,
        "show_step_details": false,
        "show_execution_completion": false
      },
      "minimal_details": {
        "description": "最小限の詳細表示",
        "show_workflow_summary": true,
        "show_step_details": true,
        "show_execution_completion": false,
        "step_details": {
          "show_type": false,
          "show_command": false,
          "show_path": false,
          "show_execution_time": true,
          "show_stdout": false,
          "show_stderr": true,
          "show_return_code": true,
          "max_command_length": 50
        }
      },
      "verbose": {
        "description": "詳細な出力",
        "show_workflow_summary": true,
        "show_step_details": true,
        "show_execution_completion": true,
        "step_details": {
          "show_type": true,
          "show_command": true,
          "show_path": true,
          "show_execution_time": true,
          "show_stdout": true,
          "show_stderr": true,
          "show_return_code": true,
          "max_command_length": 120
        }
      }
    },
    "format_presets": {
      "minimal": {
        "description": "最小限の出力",
        "templates": {
          "default": "{status_symbol} {test_name}",
          "pass": "✅ {test_name}",
          "fail": "❌ {test_name}: Expected {expected_output}, Got {actual_output}",
          "error": "💥 {test_name}: {error_message}",
          "summary": "{passed}/{total} passed"
        }
      },
      "standard": {
        "description": "標準的なフォーマット",
        "templates": {
          "default": "{test_name:.<30} │ {status_symbol} {status:^10} │ {time_formatted:>12}",
          "pass": "{test_name:.<30} │ {status_symbol} {status:^10} │ {time_formatted:>12}",
          "fail": "{test_name:.<30} │ {status_symbol} {status:^10} │ {time_formatted:>12}\\n    Expected: {expected_output}\\n    Got:      {actual_output}",
          "error": "{test_name:.<30} │ {status_symbol} {status:^10} │ {time_formatted:>12}\\n    Error: {error_message}",
          "summary": "Results: {passed:03d}/{total:03d} tests passed ({pass_rate:.1f}%)"
        }
      },
      "competitive": {
        "description": "競技プログラミング向け詳細フォーマット",
        "templates": {
          "default": "Test {test_name:.<35} │ {status_symbol} {status:^8} │ {execution_time:>8.3f}s │ {time_ms:>5d}ms",
          "pass": "Test {test_name:.<35} │ {status_symbol} {status:^8} │ {execution_time:>8.3f}s │ {time_ms:>5d}ms",
          "fail": "Test {test_name:.<35} │ {status_symbol} {status:^8} │ {execution_time:>8.3f}s │ {time_ms:>5d}ms\\n  ✓ Expected: {expected_output}\\n  ✗ Actual:   {actual_output}",
          "error": "Test {test_name:.<35} │ {status_symbol} {status:^8} │ {execution_time:>8.3f}s │ {time_ms:>5d}ms\\n  💥 Error:    {error_message}",
          "summary": "📊 Test Results: {passed:03d} passed / {failed:03d} failed / {total:03d} total ({pass_rate:>6.2f}% success rate)"
        }
      },
      "compact": {
        "description": "コンパクトな表示",
        "templates": {
          "default": "[{status_symbol}] {test_name:>20} ({time_ms:>4d}ms)",
          "pass": "[{status_symbol}] {test_name:>20} ({time_ms:>4d}ms)",
          "fail": "[{status_symbol}] {test_name:>20} ({time_ms:>4d}ms) Expected: {expected_output}, Got: {actual_output}",
          "error": "[{status_symbol}] {test_name:>20} ({time_ms:>4d}ms) Error: {error_message}",
          "summary": "✨ {passed}/{total} tests passed ({pass_rate:.1f}%)"
        }
      }
    },
    "local": {
      "aliases": ["local"],
      "working_directory": ".",
      "default_shell": "bash",
      "timeout_seconds": 300,
      "retry_settings": {
        "max_attempts": 3,
        "base_delay_seconds": 1.0,
        "max_delay_seconds": 30.0
      }
    },
    "docker": {
      "aliases": ["docker", "d"],
      "working_directory": "/workspace",
      "default_shell": "bash",
      "timeout_seconds": 300,
      "retry_settings": {
        "max_attempts": 3,
        "base_delay_seconds": 1.0,
        "max_delay_seconds": 30.0
      }
    }
  }
}