# Rustランナーエラー調査レポート

## 1. エラーの概要
現在発生しているエラーは以下の通りです：
```
error: couldn't read main.rs: No such file or directory (os error 2)
```

## 2. エラーの原因分析

### 2.1 実行フロー
1. `test_rust_runner`テストが実行される
2. DockerRunnerが初期化される
3. Rustイメージ（rust:latest）の確認と準備
4. コンパイル処理の実行時にエラーが発生

### 2.2 問題点
1. コンパイル時に`main.rs`ファイルが見つからない
   - コンパイルディレクトリ（`/compile/rust`）にソースコードファイルが正しく配置されていない
   - ファイルの作成処理が実装されていない可能性がある

### 2.3 関連コード
1. 言語設定（`src/config/languages.yaml`）
   ```yaml
   rust:
     runner:
       image: "rust:latest"
       compile: ["rustc", "main.rs"]
       run: ["./main"]
       compile_dir: "/compile/rust"
   ```

2. テストコード（`tests/docker/runner_test.rs`）
   ```rust
   let source_code = r#"
       fn main() {
           println!("Hello, World!");
       }
   "#;
   ```

## 3. 問題の特定

1. ソースコードの配置
   - ソースコードがコンテナ内の適切な場所に配置されていない
   - コンパイルディレクトリの作成が確認されていない

2. ファイル操作
   - ソースコードを`main.rs`として保存する処理が不足
   - コンパイルディレクトリのマウント設定が不適切な可能性

## 4. 推奨される修正方針

1. ソースコードの配置処理の追加
   - コンパイルディレクトリの作成確認
   - ソースコードを`main.rs`として保存する処理の実装

2. コンテナ設定の見直し
   - ボリュームマウントの設定確認
   - 作業ディレクトリの権限確認

3. エラーハンドリングの改善
   - ファイル操作に関するエラーの詳細なログ出力
   - コンパイル前の前提条件チェックの追加

## 5. 次のステップ

1. ソースコードの配置処理を実装
   ```rust
   // ソースコードをファイルに書き込む処理の追加
   async fn write_source_code(&self, source_code: &str) -> Result<(), String> {
       // コンパイルディレクトリの作成
       // ソースコードの書き込み
   }
   ```

2. テストケースの拡充
   - ファイル操作の確認テストの追加
   - エラーケースのテスト追加

3. デバッグログの強化
   - ファイル操作の詳細なログ出力
   - コンパイル処理の各ステップのログ追加 